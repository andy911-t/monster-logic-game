<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Picky Monster üëæ</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            background: linear-gradient(135deg, #ffeaa7 0%, #fab1a0 100%);
            font-family: 'Comic Sans MS', 'Arial', sans-serif;
            overflow: hidden;
        }

        .monster {
            font-size: 120px;
            animation: bounce 2s ease-in-out infinite;
        }

        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }

        .monster.happy {
            animation: celebrate 0.5s ease-in-out;
        }

        @keyframes celebrate {
            0%, 100% { transform: scale(1) rotate(0deg); }
            25% { transform: scale(1.2) rotate(-5deg); }
            75% { transform: scale(1.2) rotate(5deg); }
        }

        .monster.sad {
            animation: shake 0.5s ease-in-out;
        }

        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-10px); }
            75% { transform: translateX(10px); }
        }

        .item {
            transition: transform 0.3s ease;
            cursor: grab;
            user-select: none;
        }

        .item:active {
            cursor: grabbing;
            transform: scale(1.1);
        }

        .craving-bubble {
            background: white;
            border-radius: 30px;
            padding: 20px 40px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            animation: pulse 1.5s ease-in-out infinite;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        .button {
            width: 120px;
            height: 120px;
            border-radius: 50%;
            font-size: 60px;
            border: none;
            cursor: pointer;
            transition: all 0.2s ease;
            box-shadow: 0 8px 20px rgba(0,0,0,0.3);
        }

        .button:active {
            transform: scale(0.9);
            box-shadow: 0 4px 10px rgba(0,0,0,0.3);
        }

        .feed-btn {
            background: linear-gradient(135deg, #55efc4, #00b894);
        }

        .trash-btn {
            background: linear-gradient(135deg, #ff7675, #d63031);
        }

        .confetti {
            position: fixed;
            width: 10px;
            height: 10px;
            background: #f39c12;
            animation: confetti-fall 1s ease-out forwards;
            pointer-events: none;
        }

        @keyframes confetti-fall {
            to {
                transform: translateY(100vh) rotate(720deg);
                opacity: 0;
            }
        }

        .score {
            font-size: 36px;
            font-weight: bold;
            color: white;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        /* Visual rule displays */
        .shape-circle {
            width: 120px;
            height: 120px;
            border-radius: 50%;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            display: inline-block;
            border: 6px solid #2d3436;
        }

        .shape-square {
            width: 120px;
            height: 120px;
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            display: inline-block;
            border: 6px solid #2d3436;
        }

        .shape-star {
            width: 0;
            height: 0;
            border-left: 60px solid transparent;
            border-right: 60px solid transparent;
            border-bottom: 100px solid #ffd93d;
            position: relative;
            display: inline-block;
            filter: drop-shadow(0 0 10px rgba(0,0,0,0.3));
        }

        .shape-star:before {
            content: '';
            position: absolute;
            top: 30px;
            left: -60px;
            width: 0;
            height: 0;
            border-left: 60px solid transparent;
            border-right: 60px solid transparent;
            border-top: 100px solid #ffd93d;
        }

        .color-word {
            font-size: 80px;
            font-weight: 900;
            text-transform: uppercase;
            text-shadow: 4px 4px 8px rgba(0,0,0,0.3);
            letter-spacing: 4px;
        }

        /* Colored geometric shapes for items */
        .game-shape {
            width: 120px;
            height: 120px;
            display: inline-block;
            border: 6px solid #2d3436;
            box-shadow: 0 8px 20px rgba(0,0,0,0.3);
        }

        .game-shape.round {
            border-radius: 50%;
        }

        .game-shape.square {
            border-radius: 10px;
        }

        .game-shape.star-shape {
            width: 0;
            height: 0;
            border-left: 60px solid transparent;
            border-right: 60px solid transparent;
            border-bottom: 100px solid currentColor;
            position: relative;
            border: none;
        }

        .game-shape.star-shape:before {
            content: '';
            position: absolute;
            top: 30px;
            left: -60px;
            width: 0;
            height: 0;
            border-left: 60px solid transparent;
            border-right: 60px solid transparent;
            border-top: 100px solid currentColor;
        }
    </style>
</head>
<body class="flex items-center justify-center min-h-screen">
    <div class="w-full max-w-2xl mx-auto p-4">
        <!-- Score Display -->
        <div class="text-center mb-4">
            <div class="score">‚≠ê <span id="score">0</span></div>
        </div>

        <!-- Monster & Craving -->
        <div class="text-center mb-8">
            <div id="monster" class="monster">üëæ</div>
            <div class="flex justify-center mt-4">
                <div class="craving-bubble">
                    <div class="text-2xl font-bold mb-3" style="color: #2d3436;">I want:</div>
                    <div id="craving" class="flex justify-center items-center min-h-[120px]"></div>
                </div>
            </div>
        </div>

        <!-- Item Display -->
        <div class="text-center mb-8 min-h-[150px] flex items-center justify-center">
            <div id="item-container" class="item"></div>
        </div>

        <!-- Action Buttons -->
        <div class="flex justify-center gap-8">
            <button id="trash-btn" class="button trash-btn">‚ùå</button>
            <button id="feed-btn" class="button feed-btn">‚úÖ</button>
        </div>

        <!-- Hidden Info (For Parent Reference) -->
        <div class="text-center mt-8 text-white text-sm opacity-50">
            Rule: <span id="rule-info"></span> | Item: <span id="item-info"></span>
        </div>
    </div>

    <script>
        // ============================================
        // GAME DATA - Geometric shapes with colors
        // ============================================
        const ITEMS = [
            // RED items
            { color: "red", shape: "round" },
            { color: "red", shape: "square" },
            { color: "red", shape: "star" },
            
            // YELLOW items
            { color: "yellow", shape: "round" },
            { color: "yellow", shape: "square" },
            { color: "yellow", shape: "star" },
            
            // GREEN items
            { color: "green", shape: "round" },
            { color: "green", shape: "square" },
            { color: "green", shape: "star" },
            
            // BLUE items
            { color: "blue", shape: "round" },
            { color: "blue", shape: "square" },
            { color: "blue", shape: "star" },
            
            // ORANGE items
            { color: "orange", shape: "round" },
            { color: "orange", shape: "square" },
            { color: "orange", shape: "star" },
            
            // PURPLE items
            { color: "purple", shape: "round" },
            { color: "purple", shape: "square" },
            { color: "purple", shape: "star" },
            
            // PINK items
            { color: "pink", shape: "round" },
            { color: "pink", shape: "square" },
            { color: "pink", shape: "star" },
        ];

        // Color hex values
        const COLOR_MAP = {
            red: '#e74c3c',
            yellow: '#f1c40f',
            green: '#2ecc71',
            blue: '#3498db',
            orange: '#e67e22',
            purple: '#9b59b6',
            pink: '#fd79a8'
        };

        // Rule configurations with clear visual displays
        const RULES = [
            // COLORS - Show the word in that color
            { type: "color", value: "red", displayType: "color", displayText: "RED", displayColor: "#e74c3c" },
            { type: "color", value: "yellow", displayType: "color", displayText: "YELLOW", displayColor: "#f1c40f" },
            { type: "color", value: "green", displayType: "color", displayText: "GREEN", displayColor: "#2ecc71" },
            { type: "color", value: "blue", displayType: "color", displayText: "BLUE", displayColor: "#3498db" },
            { type: "color", value: "orange", displayType: "color", displayText: "ORANGE", displayColor: "#e67e22" },
            { type: "color", value: "purple", displayType: "color", displayText: "PURPLE", displayColor: "#9b59b6" },
            { type: "color", value: "pink", displayType: "color", displayText: "PINK", displayColor: "#fd79a8" },
            
            // SHAPES - Show geometric shape
            { type: "shape", value: "round", displayType: "shape", displayShape: "circle" },
            { type: "shape", value: "square", displayType: "shape", displayShape: "square" },
            { type: "shape", value: "star", displayType: "shape", displayShape: "star" },
        ];

        // ============================================
        // GAME STATE
        // ============================================
        let currentRule = null;
        let currentItem = null;
        let score = 0;

        // ============================================
        // DOM ELEMENTS
        // ============================================
        const monsterEl = document.getElementById('monster');
        const cravingEl = document.getElementById('craving');
        const itemContainerEl = document.getElementById('item-container');
        const feedBtn = document.getElementById('feed-btn');
        const trashBtn = document.getElementById('trash-btn');
        const scoreEl = document.getElementById('score');
        const ruleInfoEl = document.getElementById('rule-info');
        const itemInfoEl = document.getElementById('item-info');

        // ============================================
        // SOUND FUNCTIONS - Using Web Audio API
        // ============================================
        function playChompSound() {
            const audioContext = new (window.AudioContext || window.webkitAudioContext)();
            
            // Create a fun "chomp chomp" eating sound
            for (let i = 0; i < 3; i++) {
                setTimeout(() => {
                    const oscillator = audioContext.createOscillator();
                    const gainNode = audioContext.createGain();
                    
                    oscillator.connect(gainNode);
                    gainNode.connect(audioContext.destination);
                    
                    // Quick pitch change for chomp effect
                    oscillator.frequency.setValueAtTime(600, audioContext.currentTime);
                    oscillator.frequency.exponentialRampToValueAtTime(200, audioContext.currentTime + 0.08);
                    oscillator.type = 'square';
                    
                    gainNode.gain.setValueAtTime(0.3, audioContext.currentTime);
                    gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.08);
                    
                    oscillator.start(audioContext.currentTime);
                    oscillator.stop(audioContext.currentTime + 0.08);
                }, i * 120);
            }
        }

        function playWrongSound() {
            const audioContext = new (window.AudioContext || window.webkitAudioContext)();
            const oscillator = audioContext.createOscillator();
            const gainNode = audioContext.createGain();
            
            oscillator.connect(gainNode);
            gainNode.connect(audioContext.destination);
            
            // Descending "uh-oh" sound
            oscillator.frequency.setValueAtTime(400, audioContext.currentTime);
            oscillator.frequency.exponentialRampToValueAtTime(200, audioContext.currentTime + 0.3);
            oscillator.type = 'triangle';
            
            gainNode.gain.setValueAtTime(0.2, audioContext.currentTime);
            gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.3);
            
            oscillator.start(audioContext.currentTime);
            oscillator.stop(audioContext.currentTime + 0.3);
        }

        // ============================================
        // GAME LOGIC
        // ============================================
        function getRandomItem(array) {
            return array[Math.floor(Math.random() * array.length)];
        }

        function setNewRule() {
            currentRule = getRandomItem(RULES);
            displayRule();
            ruleInfoEl.textContent = `${currentRule.type}: ${currentRule.value}`;
        }

        function displayRule() {
            cravingEl.innerHTML = '';
            
            if (currentRule.displayType === 'color') {
                // Show color word in that color
                const colorWord = document.createElement('div');
                colorWord.className = 'color-word';
                colorWord.textContent = currentRule.displayText;
                colorWord.style.color = currentRule.displayColor;
                cravingEl.appendChild(colorWord);
                
            } else if (currentRule.displayType === 'shape') {
                // Show geometric shape
                if (currentRule.displayShape === 'circle') {
                    const circle = document.createElement('div');
                    circle.className = 'shape-circle';
                    cravingEl.appendChild(circle);
                } else if (currentRule.displayShape === 'square') {
                    const square = document.createElement('div');
                    square.className = 'shape-square';
                    cravingEl.appendChild(square);
                } else if (currentRule.displayShape === 'star') {
                    const star = document.createElement('div');
                    star.className = 'shape-star';
                    cravingEl.appendChild(star);
                }
            }
        }

        function setNewItem() {
            currentItem = getRandomItem(ITEMS);
            displayItem();
            itemInfoEl.textContent = `${currentItem.color} | ${currentItem.shape}`;
        }

        function displayItem() {
            itemContainerEl.innerHTML = '';
            
            const shape = document.createElement('div');
            shape.className = `game-shape ${currentItem.shape === 'round' ? 'round' : currentItem.shape === 'square' ? 'square' : 'star-shape'}`;
            
            const bgColor = COLOR_MAP[currentItem.color];
            
            if (currentItem.shape === 'star') {
                shape.style.color = bgColor;
            } else {
                shape.style.backgroundColor = bgColor;
            }
            
            itemContainerEl.appendChild(shape);
        }

        function checkMatch() {
            return currentItem[currentRule.type] === currentRule.value;
        }

        function handleFeed() {
            if (checkMatch()) {
                correct();
            } else {
                incorrect();
            }
        }

        function handleTrash() {
            if (!checkMatch()) {
                correct();
            } else {
                incorrect();
            }
        }

        function correct() {
            score++;
            scoreEl.textContent = score;
            
            // Happy monster
            monsterEl.classList.remove('sad');
            monsterEl.classList.add('happy');
            setTimeout(() => monsterEl.classList.remove('happy'), 500);
            
            // Confetti
            createConfetti();
            
            // Play chomp sound
            playChompSound();
            
            // Next item
            setTimeout(() => {
                setNewItem();
                // Occasionally change rule
                if (Math.random() < 0.3) {
                    setNewRule();
                }
            }, 600);
        }

        function incorrect() {
            // Sad monster
            monsterEl.classList.remove('happy');
            monsterEl.classList.add('sad');
            setTimeout(() => monsterEl.classList.remove('sad'), 500);
            
            // Play wrong sound
            playWrongSound();
            
            // Item bounces back
            itemContainerEl.style.transform = 'scale(0.8)';
            setTimeout(() => {
                itemContainerEl.style.transform = 'scale(1)';
            }, 300);
        }

        // ============================================
        // VISUAL EFFECTS
        // ============================================
        function createConfetti() {
            const colors = ['#e74c3c', '#f39c12', '#f1c40f', '#2ecc71', '#3498db', '#9b59b6'];
            for (let i = 0; i < 30; i++) {
                setTimeout(() => {
                    const confetti = document.createElement('div');
                    confetti.className = 'confetti';
                    confetti.style.left = Math.random() * 100 + '%';
                    confetti.style.background = colors[Math.floor(Math.random() * colors.length)];
                    confetti.style.animationDelay = Math.random() * 0.3 + 's';
                    document.body.appendChild(confetti);
                    
                    setTimeout(() => confetti.remove(), 1000);
                }, i * 20);
            }
        }

        // ============================================
        // DRAG & DROP (MOBILE FRIENDLY)
        // ============================================
        let touchStartX = 0;
        let isDragging = false;

        itemContainerEl.addEventListener('mousedown', startDrag);
        itemContainerEl.addEventListener('touchstart', startDrag);
        
        document.addEventListener('mousemove', drag);
        document.addEventListener('touchmove', drag);
        
        document.addEventListener('mouseup', endDrag);
        document.addEventListener('touchend', endDrag);

        function startDrag(e) {
            isDragging = true;
            touchStartX = e.type.includes('mouse') ? e.clientX : e.touches[0].clientX;
        }

        function drag(e) {
            if (!isDragging) return;
            
            const currentX = e.type.includes('mouse') ? e.clientX : e.touches[0].clientX;
            const diff = currentX - touchStartX;
            
            itemContainerEl.style.transform = `translateX(${diff}px)`;
        }

        function endDrag(e) {
            if (!isDragging) return;
            isDragging = false;
            
            const currentX = e.type.includes('mouse') ? e.clientX : e.changedTouches[0].clientX;
            const diff = currentX - touchStartX;
            
            itemContainerEl.style.transform = 'translateX(0)';
            
            if (diff > 100) {
                handleFeed();
            } else if (diff < -100) {
                handleTrash();
            }
        }

        // ============================================
        // BUTTON EVENTS
        // ============================================
        feedBtn.addEventListener('click', handleFeed);
        trashBtn.addEventListener('click', handleTrash);

        // ============================================
        // INITIALIZE GAME
        // ============================================
        setNewRule();
        setNewItem();
    </script>
</body>
</html>
